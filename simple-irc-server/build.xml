<project name="sis" default="dist" basedir=".">
	<description>
		Main build file
	</description>
	<property name="src" location="src"/>
	<property name="build" location="bin"/>
	<property name="dist" location="dist"/>
	<property name="run" location="test"/>
	<property name="javadoc" location="javadoc"/>
	<property name="additions" location="additions"/>

	
	<target name="init">
		<!-- Create the time stamp -->
		<tstamp/>
		<!-- Create the build directory structure used by compile -->
		<mkdir dir="${build}"/>
	</target>

	<target name="compile" depends="init"
			description="compile the source ">
		<!-- Compile the java code from ${src} into ${build} -->
		<javac srcdir="${src}" destdir="${build}" debug="true"/>
	</target>
	
	<target name="dist" depends="compile"
			description="Generate the distribution">
		<!-- Create the distribution directotry -->
		<mkdir dir="${dist}"/>
		    
		<!-- Put everething in ${biuld} into the project_name.jar file -->
		<jar jarfile="${dist}/${ant.project.name}.jar" basedir="${build}">
		    <manifest>
		        <attribute name="Main-Class" value="Server"/>
		    </manifest>
		</jar>
	</target>
	
	<target name="run" depends="dist">
	    <!-- Copy configuration file -->
		<copy file="${additions}/IrcServerConfig.xml" 
		    todir="${run}/"/>
	    <!-- Copy MOTD file -->
		<copy file="${additions}/IrcServerMotd.txt" 
		    todir="${run}/"/>
	    <java dir="${run}" 
	        jar="${dist}/${ant.project.name}.jar" 
	        fork="true">
	    </java>
	</target>
	
	<target name="javadoc" >
	    <javadoc destdir="${javadoc}" charset="UTF-8">
            <sourcefiles>
	            <fileset dir="${src}/${ant.project.name}/"/>
	            <fileset dir="${src}/${ant.project.name}/base/"/>
	            <fileset dir="${src}/${ant.project.name}/channel/"/>
	            <fileset dir="${src}/${ant.project.name}/config/"/>
	            <fileset dir="${src}/${ant.project.name}/connection/"/>
	            <fileset dir="${src}/${ant.project.name}/parser/"/>
	            <fileset dir="${src}/${ant.project.name}/parser/commands/"/>
	            <fileset dir="${src}/${ant.project.name}/processor/"/>
	            <fileset dir="${src}/${ant.project.name}/talker/"/>
	            <fileset dir="${src}/${ant.project.name}/talker/service/"/>
	            <fileset dir="${src}/${ant.project.name}/talker/server/"/>
	            <fileset dir="${src}/${ant.project.name}/talker/user/"/>
	            <fileset dir="${src}/${ant.project.name}/tools/"/>
	        </sourcefiles>
	    </javadoc>
	</target>
	
	<target name="clean build">
		<delete dir="${build}" />
	</target>
	
	<target name="clean dist">
		<delete dir="${dist}" />
	</target>
	
	<target name="clean run">
		<delete dir="${run}"/>
	</target>
	
	<target name="clean javadoc">
		<delete dir="${javadoc}"/>
	</target>
	
	<target name="clean all">
		<delete dir="${build}" />
		<delete dir="${dist}" />
		<delete dir="${run}"/>
		<delete dir="${javadoc}"/>
	</target>

</project>




